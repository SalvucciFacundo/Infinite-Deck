<app-sidebar />

<main class="main-layout">
  <router-outlet />

  @if (auth.currentUser()) {
  <div class="floating-admin">
    <app-image-uploader />
  </div>
  }
</main>

@if (showAuthModal()) {
<div class="modal-overlay" (click)="ui.closeAuthModal()">
  <div class="auth-modal" (click)="$event.stopPropagation()" [formGroup]="authForm">
    <h2>{{ isRegistering() ? 'Crear cuenta' : 'Iniciar sesión' }}</h2>

    <div class="form-group">
      <label>Email</label>
      <input type="email" formControlName="email" placeholder="tu@email.com" />
    </div>

    <div class="form-group">
      <label>Contraseña</label>
      <input type="password" formControlName="password" placeholder="Mínimo 6 caracteres" />
    </div>

    @if (isRegistering()) {
    <div class="form-group">
      <label>Nombre público</label>
      <input type="text" formControlName="displayName" placeholder="Cómo te verán otros" />
    </div>
    }

    <button (click)="onSubmit()" class="btn-submit" [disabled]="authForm.invalid">
      {{ isRegistering() ? 'Registrarse' : 'Entrar' }}
    </button>

    <p class="toggle-mode">
      {{ isRegistering() ? '¿Ya tienes cuenta?' : '¿No tienes cuenta?' }}
      <a (click)="toggleAuthMode()">{{ isRegistering() ? 'Inicia sesión' : 'Regístrate aquí' }}</a>
    </p>

    <button (click)="ui.closeAuthModal()" class="btn-close">Cerrar</button>
  </div>
</div>
} @if (state.selectedImage()) {
<app-art-modal />
}
